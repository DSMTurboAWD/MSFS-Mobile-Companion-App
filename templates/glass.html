 <!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>MSFS2020 Mobile Companion App</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<!-- Range Slider CSS-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rangeslider.js/2.3.3/rangeslider.css" integrity="sha512-FkNnPJevAkIHB3NqUiMadWNcoMcOCPQUMyF55JeAFZmPcSR6wK6TgZ0qL6bMrRqGNaaVS8CAwBYceORhdTUILQ==" crossorigin="anonymous" />

	<!-- Leaflet CSS and JS -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	<script src="https://cdn.jsdelivr.net/npm/leaflet-rotatedmarker@0.2.0/leaflet.rotatedMarker.min.js"></script>
	<script src="/static/vendor/leaflet-providers/leaflet-providers.js"></script>
	<script src='https://unpkg.com/leaflet.marker.slideto@0.2.0/Leaflet.Marker.SlideTo.js'></script>

	<!-- Fontawesome JS-->
	<script src="https://kit.fontawesome.com/99043d701d.js" crossorigin="anonymous"></script>

	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- JQuery UI -->
	<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">

	<!-- JQuery UI Slider -->
	<link rel="stylesheet" href="/static/vendor/jquery-ui-slider/jquery-ui-slider-pips.css">
	<script src="/static/vendor/jquery-ui-slider/jquery-ui-slider-pips.js"></script>

	<!-- Sweetalert2 -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

	<!-- Microtip tooltips -->
	<link rel="stylesheet" href="https://unpkg.com/microtip/microtip.css">

	<!-- Bootstrap Validator -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"></script>

	<!-- Set script root-->
	<script type=text/javascript>
		$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	</script>

	<style>
		button {
			margin-top: 2px;
			margin-bottom: 2px;
		}
		
		.navbar::-webkit-scrollbar { width: 0 !important }

		.navbar { overflow: -moz-scrollbars-none; }

		.navbar { -ms-overflow-style: none; }
	</style>

</head>

<body style="background-color:#6c757d">

<!-- NAVBAR -->
<nav class="navbar navbar-expand navbar-dark bg-dark" style="min-width:200px;overflow-x:auto;overflow-y:hidden;flex-wrap:nowrap;">
	<a class="navbar-brand" href="#">
		<img src="/static/img/fs_mca_logo.png" style="height:32px;" alt="MSFS MCA">
	</a>
	<button class="btn btn-warning" onclick="$(this).blur();mapRefreshFix();setTimeout(function(){map.invalidateSize(true);},500);" style="margin-left:-8px;margin-right:5px" type="button" data-toggle="collapse" data-target="#collapseMap" aria-expanded="true" aria-controls="collapseMap">Map</button>
	<button class="btn btn-warning" onclick="$(this).blur();" style="margin-right:5px" type="button" data-toggle="collapse" data-target="#collapseRadio" aria-expanded="false" aria-controls="collapseRadio">NAV</button>
	<button class="btn btn-warning" onclick="$(this).blur();" style="margin-right:5px" type="button" data-toggle="collapse" data-target="#collapseG3000" aria-expanded="false" aria-controls="collapseG3000">NAV&nbsp;Direct</button>
	<button class="btn btn-warning" onclick="$(this).blur();" style="margin-right:5px" type="button" data-toggle="collapse" data-target="#collapseAP" aria-expanded="false" aria-controls="collapseAP">AP</button>
	&nbsp;&nbsp;
</nav>

<div class="container-fluid bg-secondary" id="myGroup" style="margin-bottom:0px">

	<!-- Map -->
	<div class="collapse show" id="collapseMap" data-parent="#myGroup" style="margin-bottom:-30px">
		<div class="row" id="map_row" style="height:calc(100vh - 90px);height:calc((var(--vh, 1vh) * 100) - 90px);margin-top:10px;margin-bottom:-30px;">
			<div class="col"  id="map_column" style="position:relative; height=100%;z-index:1;">
				<div id = "map" style = "height: 100%; width: 100%;"></div>
			</div>
		</div>
		<button id=followModeButton style="position:relative;z-index:2;top:-3px;" class="btn btn-primary btn-sm" type="button" onclick="toggleFollowPlane();$(this).blur();">
			<i class="fas fa-location-arrow"></i> <span id=followMode>Unfollow Plane</span>
		</button>
	</div>

	<!-- Radios Normal-->
	<div class="collapse" id="collapseRadio" data-parent="#myGroup">
		<div class="card bg-dark text-white" style="margin-top:10px; margin-bottom:12px;">
			<div class="card-body">
			
				<!-- First Row - NAV 1 & 2-->
				<div class="row" style="margin-top:-23px">
					
					<!-- NAV 1 -->
					<div class="col" style="margin-top:20px; max-width:382px; min-width:278px;">
						<div class="lead">NAV 1</div>					
						<!-- NAV 1 Frequency Swap Row-->
						<div class="row" style="margin-bottom:10px">
						<div class="col">
							<div class="btn-group" role="group" aria-label="NAV1 STBY">
								<button type="button" class="btn btn-light" style="width:65px" disabled>STBY</button>
								<button type="button" class="btn btn-light" style="background-color:#000000; width:80px" disabled><span class="text-danger" id="nav1_standby">?</span></button>
							</div>
							<button onclick="triggerSimEvent ('NAV1_RADIO_SWAP', 0, true); $(this).blur(); nav1switch();" type="button" class="btn btn-secondary" title="Swap NAV1 Standby frequency" style="width:55px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"></path></svg></button>
							<div class="btn-group" role="group" aria-label="NAV1 USE">
								<button type="button" class="btn btn-light" style="width:65px" disabled>USE</button>
								<button type="button" class="btn btn-light" style="background-color:#000000; width:80px" disabled><span class="text-danger" id="nav1_active">?</span></button>
							</div>
						</div>
						</div>
						
						<!-- NAV 1 Tuner Row-->
						<div class="row align-items-center" style="margin-bottom:10px;margin-top:5px">
						<div class="col-auto" style="padding-right:5px">
							<button onclick="triggerSimEvent ('NAV1_RADIO_WHOLE_DEC', 1, true); $(this).blur(); nav1minus1()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease NAV1 frequency by 1 MHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-left-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M3.86 8.753l5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/></svg></button>
							<button onclick="triggerSimEvent ('NAV1_RADIO_FRACT_DEC', 1, true); $(this).blur(); nav1minus005()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease NAV1 frequency by 25 kHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 12.796L4.519 8 10 3.204v9.592zm-.659.753l-5.48-4.796a1 1 0 0 1 0-1.506l5.48-4.796A1 1 0 0 1 11 3.204v9.592a1 1 0 0 1-1.659.753z"/></svg></button>
						</div>
						<div class="col" style="padding-left:0px;padding-right:0px;margin">
							<button type="button" class="btn btn-light btn-sm" style="width:100%" disabled>Tune NAV 1</button>
						</div>
						<div class="col-auto" style="padding-left:5px">
							<button onclick="triggerSimEvent ('NAV1_RADIO_FRACT_INC', 1, true); $(this).blur(); nav1plus005()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase NAV1 frequency by 25 kHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 12.796L11.481 8 6 3.204v9.592zm.659.753l5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"/></svg></button>
							<button onclick="triggerSimEvent ('NAV1_RADIO_WHOLE_INC', 1, true); $(this).blur(); nav1plus1()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase NAV1 frequency by 1 MHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-right-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/></svg></button>
						</div>
						</div>
						
						<!-- NAV 1 OBS Settings-->
						<div class="row">
						<div class="col">
							<div class="input-group" style="width:220px">
								<div class="input-group-prepend">
									<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8">OBS 1 (Deg)</span>
								</div>
								<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('OBS_1_Set').click()" inputmode="numeric" pattern="[0-9]*" id="OBS_1_heading" aria-label="OBS 1 Deg" aria-describedby="OBS_1_Deg" placeholder="-">
								<div class="input-group-append">
									<button onclick='if (document.getElementById("OBS_1_heading").value <= 360 && document.getElementById("OBS_1_heading").value >= 0 && document.getElementById("OBS_1_heading").value % 1 === 0 && document.getElementById("OBS_1_heading").value != "") {triggerSimEventFromField ("VOR1_SET", "OBS_1_heading", "");}; $(this).blur();' class="btn btn-warning" type="button" id="OBS_1_Set" style="margin-top:0px;margin-bottom:0px;" title="Set OBS 1 heading in degrees">Set</button>
								</div>
							</div>
						</div>
						</div>		
					</div>
					
					
					<!-- NAV 2 -->
					<div class="col" style="margin-top:20px; max-width:382px; min-width:278px;">
						<div class="lead">NAV 2</div>	

						<!-- NAV 2 Frequency Swap Row-->
						<div class="row" style="margin-bottom:10px">
						<div class="col">
							<div class="btn-group" role="group" aria-label="NAV2 STBY">
								<button type="button" class="btn btn-light" style="width:65px" disabled>STBY</button>
								<button type="button" class="btn btn-light" style="background-color:#000000; width:80px" disabled><span class="text-danger" id="nav2_standby">?</span></button>
							</div>
							<button onclick="triggerSimEvent ('NAV2_RADIO_SWAP', 0, true); $(this).blur(); nav2switch();" type="button" class="btn btn-secondary" title="Swap NAV2 Standby frequency" style="width:55px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"></path></svg></button>
							<div class="btn-group" role="group" aria-label="NAV2 USE">
								<button type="button" class="btn btn-light" style="width:65px" disabled>USE</button>
								<button type="button" class="btn btn-light" style="background-color:#000000; width:80px" disabled><span class="text-danger" id="nav2_active">?</span></button>
							</div>
						</div>
						</div>
						
						<!-- NAV 2 Tuner Row-->
						<div class="row align-items-center" style="margin-bottom:10px;margin-top:5px">
						<div class="col-auto" style="padding-right:5px">
							<button onclick="triggerSimEvent ('NAV2_RADIO_WHOLE_DEC', 1, true); $(this).blur(); nav2minus1()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease NAV2 frequency by 1 MHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-left-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M3.86 8.753l5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/></svg></button>
							<button onclick="triggerSimEvent ('NAV2_RADIO_FRACT_DEC', 1, true); $(this).blur(); nav2minus005()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease NAV2 frequency by 25 kHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 12.796L4.519 8 10 3.204v9.592zm-.659.753l-5.48-4.796a1 1 0 0 1 0-1.506l5.48-4.796A1 1 0 0 1 11 3.204v9.592a1 1 0 0 1-1.659.753z"/></svg></button>
						</div>
						<div class="col" style="padding-left:0px;padding-right:0px;margin">	
							<button type="button" class="btn btn-light btn-sm" style="width:100%" disabled>Tune NAV 2</button>
						</div>
						<div class="col-auto" style="padding-left:5px">	
							<button onclick="triggerSimEvent ('NAV2_RADIO_FRACT_INC', 1, true); $(this).blur(); nav2plus005()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase NAV2 frequency by 25 kHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 12.796L11.481 8 6 3.204v9.592zm.659.753l5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"/></svg></button>
							<button onclick="triggerSimEvent ('NAV2_RADIO_WHOLE_INC', 1, true); $(this).blur(); nav2plus1()" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase NAV2 frequency by 1 MHz" style="width:45px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-right-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/></svg></button>
						</div>
						</div>
						
						<!-- NAV 2 OBS Settings-->
						<div class="row">
						<div class="col">		
							<div class="input-group" style="width:220px">
								<div class="input-group-prepend">
									<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8">OBS 2 (Deg)</span>
								</div>
								<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('OBS_2_Set').click()" inputmode="numeric" pattern="[0-9]*" id="OBS_2_heading" aria-label="OBS 2 Deg" aria-describedby="OBS_2_Deg" placeholder="-">
								<div class="input-group-append">
									<button onclick='if (document.getElementById("OBS_2_heading").value <= 360 && document.getElementById("OBS_2_heading").value >= 0 && document.getElementById("OBS_2_heading").value % 1 === 0 && document.getElementById("OBS_2_heading").value != "") {triggerSimEventFromField ("VOR2_SET", "OBS_2_heading", ""); nav2_deg_display ("OBS_2_heading");}; $(this).blur();' class="btn btn-warning" type="button" id="OBS_2_Set" style="margin-top:0px;margin-bottom:0px;" title="Set OBS 2 heading in degrees">Set</button>
								</div>
							</div>
						</div>
						</div>
					</div>
					
					<!-- ADF -->
					<div class="col sm-auto" style="margin-top:20px; max-width:382px; min-width:278px;">
						<div class="lead">ADF</div>	

						<div class="row align-items-center" style="margin-bottom:10px;margin-top:5px">
							<div class="col" style="min-width:208px;max-width:208px;">
							<div class="row">
							<!-- ADF Standby Tuner-->
							<div class="col" style="margin-left:15px">
								<div class="row">
								<button type="button" class="btn btn-secondary" style="width:45px;" disabled>&nbsp;</button>
								</div>
								<div class="row">
								<button type="button" class="btn btn-light" style="background-color:#000000; width:45px;" disabled><span class="text-danger" id="adf_stby_1000">?</span></button>
								</div>
								<div class="row">
								<button type="button" class="btn btn-secondary" style="width:45px;" disabled>&nbsp;</button>
								</div>
							</div>
							<div class="col" style="margin-left:4px">
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_100_INC', 1, true); $(this).blur(); adfplus100();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase ADF frequency by 100 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-up-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/></svg></button>
								</div>
								<div class="row">
								<button type="button" class="btn btn-light" style="background-color:#000000; width:45px" disabled><span class="text-danger" id="adf_stby_100">?</span></button>
								</div>
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_100_DEC', 1, true); $(this).blur(); adfminus100();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease ADF frequency by 100 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg></button>
								</div>
							</div>
							<div class="col" style="margin-left:4px">
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_10_INC', 1, true); $(this).blur(); adfplus10();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase ADF frequency by 10 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-up-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/></svg></button>
								</div>
								<div class="row">
								<button type="button" class="btn btn-light" style="background-color:#000000; width:45px" disabled><span class="text-danger" id="adf_stby_10">?</span></button>
								</div>
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_10_DEC', 1, true); $(this).blur(); adfminus10();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease ADF frequency by 10 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg></button>
								</div>
							</div>
							<div class="col" style="margin-left:4px">
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_1_INC', 1, true); $(this).blur(); adfplus1();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Increase ADF frequency by 1 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-up-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/></svg></button>
								</div>
								<div class="row">
								<button type="button" class="btn btn-light" style="background-color:#000000; width:45px" disabled><span class="text-danger" id="adf_stby_1">?</span></button>
								</div>
								<div class="row">
								<button onclick="triggerSimEvent ('ADF_1_DEC', 1, true); $(this).blur(); adfminus1();" id="autopilot-com-freq" type="button" class="btn btn-secondary" title="Decrease ADF frequency by 1 kHz" style="width:45px;"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-caret-down-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg></button>
								</div>
							</div>
							</div>
							</div>
							
							<!-- ADF Frequency Switch -->
							<div class="col" style="margin-left:6px;">
								<div class="row">
								<button onclick="triggerSimEvent ('ADF1_RADIO_SWAP', 1, true); $(this).blur(); adfswitch();" type="button" class="btn btn-secondary" title="Swap ADF Standby frequency" style="width:55px;margin-right:-10px"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"></path></svg></button>
								</div>
							</div>
							
							<!-- ADF Active -->
							<div class="col" style="margin-left:15px">
								<div class="row">
								<span class="text-light">&nbsp;ADF USE:</span>
								</div>
								<div class="row">
								<button type="button" class="btn btn-light" style="background-color:#000000; width:75px; margin-right:32px; margin-bottom:26px;" disabled><span class="text-danger" id="adf_act_1000">?</span> <span class="text-danger" id="adf_act_100">?</span> <span class="text-danger" id="adf_act_10">?</span> <span class="text-danger" id="adf_act_1">?</span></button>
								</div>

							</div>
							
						</div>
						
						<!-- ADF Card -->
						<div class="row">
						<div class="col">		
							<div class="input-group" style="width:220px">
								<div class="input-group-prepend">
									<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8">ADF (Deg)</span>
								</div>
								<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('ADF_Set').click()" inputmode="numeric" pattern="[0-9]*" id="ADF_heading" aria-label="ADF Deg" aria-describedby="OBS_2_Deg" placeholder="-">
								<div class="input-group-append">
									<button onclick='if (document.getElementById("ADF_heading").value <= 360 && document.getElementById("ADF_heading").value >= 0 && document.getElementById("ADF_heading").value % 1 === 0 && document.getElementById("ADF_heading").value != "") {triggerSimEventFromField ("ADF_CARD_SET", "ADF_heading", ""); adf_deg_display ("ADF_heading");}; $(this).blur();' class="btn btn-warning" type="button" id="ADF_Set" style="margin-top:0px;margin-bottom:0px;" title="Set ADF card heading in degrees">Set</button>
								</div>
							</div>
						</div>
						</div>
						
					</div>
					
					<!-- General -->
					<div class="col-md-auto" style="margin-top:20px">
						<div class="lead">General</div>	
						<!-- Toggel Buttons Row-->
						<div class="row" style="margin-bottom:10px;margin-top:5px">
						<div class="col">				
						<button type="button" onclick="triggerSimEvent ('TOGGLE_GPS_DRIVES_NAV1', 0, true); $(this).blur();" class="btn btn-secondary" style="width:175px" title="Toggle between GPS and NAV 1 driving NAV 1 OBS display (and AP)">CDI NAV1/GPS</button>
						<button type="button" onclick="triggerSimEvent ('TOGGLE_DME', 0, true); $(this).blur();" class="btn btn-secondary" style="width:175px" title="Toggle between NAV 1 and NAV 2">DME NAV1/NAV2</button>
						</div>
						</div>
						<div class="row" style="margin-bottom:10px;margin-top:5px">
							<div class="col-auto" style="margin-right:-14px">
							Gyro Drift:
							<button type="button" onclick="triggerSimEvent ('GYRO_DRIFT_DEC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:44px" title="Decrements heading indicator">-</button>
							<button type="button" onclick="triggerSimEvent ('GYRO_DRIFT_INC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:44px" title="Increment heading indicator">+</button>
							</div>
							<div class="col-auto">
							Altimeter:
							<button type="button" onclick="triggerSimEvent ('KOHLSMAN_DEC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:44px;margin-left:2px;" title="Decrements altimeter setting">-</button>
							<button type="button" onclick="triggerSimEvent ('KOHLSMAN_INC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:44px" title="Decrements altimeter setting">+</button>
							</div>
						</div>
					</div>
					
				</div>
				
				<!-- Last Row Force Sync Frequencies -->
				<div class="row" style="margin-top:25px">
					<div class="col">
						<button type="button" onclick="syncRadio();$(this).blur();" class="btn-sm btn-danger">Force Sync Frequencies</button>
						<p class="font-italic text-secondary">Press "Force Sync Frequencies" if radio frequencies are out of sync with MSFS. Allow up to 3 seconds to sync frequencies.</p>
					</div>
				</div>
			

			</div>
		</div>
	</div>
	<!-- End of Navigation-->
	
	
	

	<!-- Radios 350i-->
	<div class="collapse" id="collapseG3000" data-parent="#myGroup">
		<div class="card bg-dark text-white" style="margin-top:10px; margin-bottom:12px;">
			<div class="card-body">
			
				<!-- First Row-->
				<div class="row" style="margin-top:-23px">
					
					<!-- NAV 1 350i-->
					<div class="col" style="margin-top:20px; max-width:382px; min-width:320px;">
						<div class="lead">NAV 1 Active</div>					
						
						<!-- NAV 1 Freq Set 350i-->
						<div class="row" style="margin-bottom:10px; margin-top:10px">
							<div class="col">
								<div class="input-group" style="width:278px">
									<div class="input-group-prepend">
										<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8; width:150px">NAV 1 Freq (MHz)</span>
									</div>
									<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('NAV1_Set').click()" inputmode="numeric" pattern="[0-9]*" id="NAV1_freq" aria-label="NAV 1 Freq" aria-describedby="NAV1_freq" placeholder="-">
									<div class="input-group-append">
										<button onclick='if (document.getElementById("NAV1_freq").value <= 117.95 && document.getElementById("NAV1_freq").value >= 108 && document.getElementById("NAV1_freq").value != "") {triggerSimEventFromField ("NAV1_RADIO_SET", "NAV1_freq", ""); nav1_g3000_freq_display ("NAV1_freq");}; $(this).blur();' class="btn btn-warning" type="button" id="NAV1_Set" style="margin-top:0px;margin-bottom:0px;" title="Set NAV 1 frequency in kHz">Set</button>
									</div>
								</div>
							</div>
						</div>
						
						<!-- NAV 1 OBS Set 350i-->
						<div class="row" style="margin-bottom:10px; margin-top:10px">
							<div class="col">
								<div class="input-group" style="width:278px">
									<div class="input-group-prepend">
										<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8; width:150px">NAV 1 OBS (deg)</span>
									</div>
									<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('OBS1_G3_Set').click()" inputmode="numeric" pattern="[0-9]*" id="OBS1_G3_heading" aria-label="OBS 1 G3000 Deg" aria-describedby="OBS1_G3_freq" placeholder="-">
									<div class="input-group-append">
										<button onclick='if (document.getElementById("OBS1_G3_heading").value <= 360 && document.getElementById("OBS1_G3_heading").value >= 0 && document.getElementById("OBS1_G3_heading").value % 1 === 0 && document.getElementById("OBS1_G3_heading").value != "") {triggerSimEventFromField ("VOR1_SET", "OBS1_G3_heading", ""); nav1_g3000_obs ("OBS1_G3_heading");}; $(this).blur();' class="btn btn-warning" type="button" id="OBS1_G3_Set" style="margin-top:0px;margin-bottom:0px;" title="Set OBS1 heading in degrees">Set</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<!-- NAV 2 350i-->
					<div class="col" style="margin-top:20px; max-width:382px; min-width:320px;">
						<div class="lead">NAV 2 Active</div>					
						
						<!-- NAV 2 Freq Set 350i-->
						<div class="row" style="margin-bottom:10px; margin-top:10px">
							<div class="col">
								<div class="input-group" style="width:278px">
									<div class="input-group-prepend">
										<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8; width:150px">NAV 2 Freq (MHz)</span>
									</div>
									<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('NAV2_Set').click()" inputmode="numeric" pattern="[0-9]*" id="NAV2_freq" aria-label="NAV 2 Freq" aria-describedby="NAV2_freq" placeholder="-">
									<div class="input-group-append">
										<button onclick='if (document.getElementById("NAV2_freq").value <= 117.95 && document.getElementById("NAV2_freq").value >= 108 && document.getElementById("NAV2_freq").value != "") {triggerSimEventFromField ("NAV2_RADIO_SET", "NAV2_freq", ""); nav2_g3000_freq_display ("NAV2_freq");}; $(this).blur();' class="btn btn-warning" type="button" id="NAV2_Set" style="margin-top:0px;margin-bottom:0px;" title="Set NAV 2 frequency in kHz">Set</button>
									</div>
								</div>
							</div>
						</div>
						
						<!-- NAV 2 OBS Set -->
						<div class="row" style="margin-bottom:10px; margin-top:10px">
							<div class="col">
								<div class="input-group" style="width:278px">
									<div class="input-group-prepend">
										<span class="input-group-text text-body" id="inputGroup-sizing-default" style="background-color:#B3B6B8; border-color:#B3B6B8; width:150px">NAV 2 OBS (deg)</span>
									</div>
									<input type="text" class="form-control" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('OBS2_G3_Set').click()" inputmode="numeric" pattern="[0-9]*" id="OBS2_G3_heading" aria-label="OBS 2 G3000 Deg" aria-describedby="OBS2_G3_freq" placeholder="-">
									<div class="input-group-append">
										<button onclick='if (document.getElementById("OBS2_G3_heading").value <= 360 && document.getElementById("OBS2_G3_heading").value >= 0 && document.getElementById("OBS2_G3_heading").value % 1 === 0 && document.getElementById("OBS2_G3_heading").value != "") {triggerSimEventFromField ("VOR2_SET", "OBS2_G3_heading", ""); nav2_g3000_obs_display ("OBS2_G3_heading");}; $(this).blur();' class="btn btn-warning" type="button" id="OBS2_G3_Set" style="margin-top:0px;margin-bottom:0px;" title="Set OBS2 heading in degrees">Set</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<!-- General 350i-->
					<div class="col-md-auto" style="margin-top:20px">
						<div class="lead">General</div>	
						<!-- Toggel Buttons Row-->
						<div class="row" style="margin-bottom:10px;margin-top:5px">
						<div class="col">				
						<button type="button" onclick="triggerSimEvent ('TOGGLE_GPS_DRIVES_NAV1', 0, true); $(this).blur();" class="btn btn-secondary" style="width:175px" title="Toggle between GPS and NAV 1 driving NAV 1 OBS display (and AP)">CDI NAV1/GPS</button>
						</div>
						</div>
						<div class="row" style="margin-bottom:10px;margin-top:5px">
							<div class="col-auto">
							Altimeter:
							<button type="button" onclick="triggerSimEvent ('KOHLSMAN_DEC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:48px;margin-left:2px;" title="Decrements altimeter setting">-</button>
							<button type="button" onclick="triggerSimEvent ('KOHLSMAN_INC', 0, true); $(this).blur();" class="btn btn-secondary" style="width:48px" title="Decrements altimeter setting">+</button>
							</div>
						</div>
					</div>
					
				</div>
				
				<!-- Last Row Force Sync Frequencies -->
				<div class="row" style="margin-top:25px">
					<div class="col">
						<p class="font-italic text-secondary">Intended for use with default 747, A320 and 350i.</p>
					</div>
				</div>
			
			</div>
		</div>
	</div>






	
	<!-- Autopilot -->
	<div class="collapse" id="collapseAP" data-parent="#myGroup">
		<div class="card bg-dark text-white" style="margin-top:10px;margin-bottom:12px;">
			<div class="card-body">
			
				<!-- First Row-->
				<div class="row" style="margin-top:-23px">
					
					<!-- AP -->
					<div class="col" style="margin-top:20px">
						<div class="lead" style="margin-bottom:-15px">AP Master</div>
						
						<button onclick="triggerSimEvent('AP_MASTER');$(this).blur();" id="autopilot-master" type="button" class="btn mt-3 btn-block btn-danger btn-lg">?</button>
						
						<hr class="bg-secondary">
						
						<div class="lead">AP Settings</div>
						
						<table style="border-collapse:separate; border-spacing:0 5px; vertical-align: middle; text-align: left">
							<tr>
								<td width="120">NAV Mode</td>
								<td width="70"><button onclick="triggerSimEvent('AP_NAV1_HOLD');$(this).blur();" id="autopilot-nav1-lock" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td></td>
							</tr>
							<tr>
								<td>Heading (Deg)</td>
								<td><button onclick="triggerSimEvent('AP_PANEL_HEADING_HOLD');$(this).blur();" id="autopilot-heading-lock" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td>
									<div class="input-group sim-input-field" style="width:150px">
										<input id="autopilot-heading-lock-dir" type="text" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('ADF_Set').click()" inputmode="numeric" pattern="[0-9]*" class="form-control" placeholder="?" aria-describedby="basic-addon2">
										<div class="input-group-append">
											<button onclick='triggerSimEventFromField ("HEADING_BUG_SET", "autopilot-heading-lock-dir", "");$(this).blur();' class="btn btn-warning" type="button" style="margin-top:0px;margin-bottom:0px;width:70px;" title="Set AP heading in degrees">Set</button>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>Altitude (Ft)</td>
								<td><button onclick="triggerSimEvent('AP_ALT_HOLD');$(this).blur();" id="autopilot-altitude-lock" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td>
									<div class="input-group sim-input-field" style="width:150px">
										<input id="autopilot-altitude-lock-var" type="text" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('ADF_Set').click()" inputmode="numeric" pattern="[0-9]*" class="form-control" placeholder="?" aria-describedby="basic-addon2">
										<div class="input-group-append">
											<button onclick='triggerSimEventFromField ("AP_ALT_VAR_SET_ENGLISH", "autopilot-altitude-lock-var", "");$(this).blur();' class="btn btn-warning" type="button" style="margin-top:0px;margin-bottom:0px;width:70px;" title="Set AP altitude in feet">Set</button>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>Vertical Speed</td>
								<td><button onclick="triggerSimEvent('AP_PANEL_VS_HOLD');$(this).blur();" id="autopilot-vertical-hold" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td>
									<div class="input-group sim-input-field" style="width:150px">
										<input id="autopilot-vertical-hold-var" type="text" class="form-control" placeholder="?" aria-describedby="basic-addon2">
										<div class="input-group-append">
											<button onclick="triggerSimEvent ('AP_VS_VAR_INC', 1, true); $(this).blur()" class="btn btn-secondary" type="button" style="margin-top:0px;margin-bottom:0px;width:36px;" title="Increase AP verical speed">+</button>
										</div>
										<div class="input-group-append">
											<button onclick="triggerSimEvent ('AP_VS_VAR_DEC', 1, true); $(this).blur()" class="btn btn-secondary" type="button" style="margin-top:0px;margin-bottom:0px;width:35px;" title="Decrease AP verical speed">-</button>
										</div>
									</div>
								</td>
							
							</tr>
							<tr>
								<td>Airspeed (Kts)</td>
								<td><button onclick="triggerSimEvent('AP_AIRSPEED_HOLD');$(this).blur();" id="autopilot-airspeed-hold" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td>
									<div class="input-group sim-input-field" style="width:150px">
										<input id="autopilot-airspeed-hold-var" type="text" type="number" onkeydown = "if (event.keyCode == 13) document.getElementById('ADF_Set').click()" inputmode="numeric" pattern="[0-9]*" class="form-control" placeholder="?" aria-describedby="basic-addon2">
										<div class="input-group-append">
											<button onclick='triggerSimEventFromField ("AP_SPD_VAR_SET", "autopilot-airspeed-hold-var", "");$(this).blur();' class="btn btn-warning" type="button" style="margin-top:0px;margin-bottom:0px;width:70px;" title="Set AP airspeed in knots">Set</button>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>Back-course</td>
								<td><button onclick="triggerSimEvent('AP_BC_HOLD');$(this).blur();" id="autopilot-backcourse-hold" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td></td>
							</tr>
							<tr>
								<td>Approach</td>
								<td><button onclick="triggerSimEvent('AP_APR_HOLD');$(this).blur();" id="autopilot-approach-hold" type="button" class="btn m-1 btn-danger" style="width: 55px">?</button></td>
								<td></td>
							</tr>
						</table>

								
							
						
						
						
					</div>
				</div>
				
				<!-- Last Row Information -->
				<div class="row" style="margin-top:25px">
					<div class="col">
						<p class="font-italic text-secondary" style="margin-bottom:0px">MSFS Mobile Companion App v1.0 by <a href="https://www.caronstudios.net" target="_blank" class="text-light">Caron Studios s.r.o.</a></p>
						<p class="font-italic text-secondary">Follow the development on <a href="https://github.com/mracko/MSFS-Mobile-Companion-App" target="_blank" class="text-light">GitHub</a>. Support the development by donating <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=CXDDYFUSWA2Z4&source=url" target="_blank" class="text-light">here.</a></p>
					</div>
				</div>
			
			</div>
		</div>
	</div>

</div>


<!-- Create map object -->
<script>

    let followPlane = true;

    // Create map options
    var mapOptions = {
        center: [48.1434, 17.1083],
        zoom: 10,
        dragging: true,
    }

    // Creating a map object
    var map = new L.map('map', mapOptions);

    // Creating a Layer object
    var simple = new L.tileLayer.provider('CartoDB.Voyager');
    var openstreet = new L.tileLayer.provider('OpenStreetMap.Mapnik');
    var grayscale = new L.tileLayer.provider('CartoDB.Positron');
    var basic = new L.tileLayer.provider('Jawg.Terrain', {
        variant: '',
        accessToken: 'CQVU4GpEMHf6XeTxVy2x2zRCDJpr6zFX61tYzcs27Jeus4kfc9XBUNfz3mhPakJZ'
    });

    var openaip_cached_basemap = new L.TileLayer("http://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_basemap@EPSG%3A900913@png/{z}/{x}/{y}.png", {
        maxZoom: 14,
        minZoom: 4,
        tms: true,
        detectRetina: true,
        subdomains: '12',
        format: 'image/png',
        transparent: true
    });

    // Adding layers to the map
    map.addLayer(basic);

    var baseLayers = {
        "Grayscale": grayscale,
        "Open Street": openstreet,
        "Pale": simple,
        "Default": basic,
    }
    var overlays = {
        "Aviation": openaip_cached_basemap
    }

    // Add control
    L.control.layers(baseLayers, overlays).addTo(map)

    // Icon options
    var iconOptions = {
        iconUrl: '/static/img/plane.png',
        iconSize: [35, 35]
    }

    // Creating a custom icon
    var customIcon = L.icon(iconOptions);

    // Creating Marker Options
    var markerOptions = {
        clickable: false,
        draggable: false,
        icon: customIcon,
        rotationAngle: 0,
        rotationOrigin: "center"
    }

    // Creating a Marker
    var marker = L.marker([17.438139, 78.395830], markerOptions);

    // Adding marker to the map
    marker.addTo(map);

</script>

<script>
    $("#elevator-trim-slider")
        .slider({
            min: -30,
            max: 30,
            orientation: "vertical"
        })
        .slider("pips", {
            step: "10",
            first: "pip",
            last: "pip"
        });

    $("#flaps-slider")
        .slider({
            min: -100,
            max: 0,
            orientation: "vertical",
	        value: 10
        })
        .slider("pips", {
            step: "50",
            first: "pip",
            last: "pip"
        });

    $("#rudder-trim-slider")
        .slider({
            min: -50,
            max: 50,
            orientation: "horizontal"
        })
        .slider("pips", {
            step: "25",
            first: "pip",
            last: "pip"
        });

</script>

<!--Boostrap JS-->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

<!--Bootstrap Toggle JS-->
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<!-- Custom JS imports -->
<script src="/static/js/custom/getSimData.js"></script>

<!-- Sync Frequencies at Startup-->
<script>
syncRadio();
</script>

<!-- Fix Map Size -->
<script>
let vh = window.innerHeight * 0.01;
document.documentElement.style.setProperty('--vh', `${vh}px`);

window.addEventListener('resize', () => {
  let vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
});

</script>

</body>
</html>